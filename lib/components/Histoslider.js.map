{"version":3,"sources":["../../src/components/Histoslider.js"],"names":["Histoslider","dragChange","dragging","setState","onChange","selection","props","data","sortedData","sort","a","b","x0","extent","x","map","d","Math","max","min","reset","state","style","width","height","padding","sliderHeight","disableHistogram","innerHeight","innerWidth","histogramHeight","maxValue","y","scale","domain","range","clamp","overrides","Object","assign","boxSizing","position","Component","propTypes","PropTypes","arrayOf","shape","number","isRequired","func","selectedColor","string","unselectedColor","barStyle","object","barBorderRadius","barPadding","histogramStyle","sliderStyle","showOnDrag","bool","handleLabelFormat","formatLabelFunction","defaultProps","undefined"],"mappings":"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","file":"Histoslider.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { max, min } from \"d3-array\";\nimport { scaleLinear as linear } from \"d3-scale\";\n\nimport Histogram from \"./Histogram\";\nimport Slider from \"./Slider\";\n\nclass Histoslider extends Component {\n  constructor() {\n    super();\n    this.state = {\n      dragging: false,\n    };\n  }\n\n  dragChange = (dragging) => {\n    this.setState({ dragging });\n  };\n\n  onChange = (selection) => {\n    const { data, onChange } = this.props;\n    const sortedData = data.sort((a, b) => +a.x0 - +b.x0);\n    const extent = [\n      min(sortedData, ({ x0 }) => +x0),\n      max(sortedData, ({ x }) => +x),\n    ];\n    onChange(\n      selection.map((d) => Math.max(extent[0], Math.min(extent[1], +d)))\n    );\n  };\n\n  reset = () => {\n    this.props.onChange(null);\n  };\n\n  render() {\n    const {\n      style,\n      data,\n      width,\n      height,\n      padding,\n      sliderHeight,\n      disableHistogram,\n    } = this.props;\n\n    const innerHeight = height - padding * 2;\n    const innerWidth = width - padding * 2;\n    const histogramHeight = innerHeight - sliderHeight;\n\n    const sortedData = data.sort((a, b) => +a.x0 - +b.x0);\n    const extent = [\n      min(sortedData, ({ x0 }) => +x0),\n      max(sortedData, ({ x }) => +x),\n    ];\n    const maxValue = max(sortedData, ({ y }) => +y);\n    const scale = linear().domain(extent).range([0, innerWidth]);\n    scale.clamp(true);\n\n    const selection = this.props.selection || extent;\n\n    const overrides = {\n      selection,\n      data: sortedData,\n      scale,\n      max: maxValue,\n      dragChange: this.dragChange,\n      onChange: this.onChange,\n      reset: this.reset,\n      width: innerWidth,\n      dragging: this.state.dragging,\n    };\n\n    return (\n      <div\n        style={Object.assign({}, style, {\n          width,\n          padding,\n          boxSizing: \"border-box\",\n          position: \"relative\",\n        })}\n        className=\"Histoslider Histoslider--wrapper\"\n      >\n        {!disableHistogram && (\n          <Histogram\n            {...Object.assign({}, this.props, overrides, {\n              height: histogramHeight,\n            })}\n          />\n        )}\n        <Slider\n          {...Object.assign({}, this.props, overrides, {\n            height: sliderHeight,\n          })}\n        />\n      </div>\n    );\n  }\n}\n\nHistoslider.propTypes = {\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      x0: PropTypes.number,\n      x: PropTypes.number,\n      y: PropTypes.number,\n    })\n  ).isRequired,\n  onChange: PropTypes.func.isRequired,\n  selectedColor: PropTypes.string,\n  unselectedColor: PropTypes.string,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  selection: PropTypes.arrayOf(PropTypes.number),\n  barStyle: PropTypes.object,\n  barBorderRadius: PropTypes.number,\n  barPadding: PropTypes.number,\n  histogramStyle: PropTypes.object,\n  sliderStyle: PropTypes.object,\n  showOnDrag: PropTypes.bool,\n  style: PropTypes.object,\n  handleLabelFormat: PropTypes.string,\n  formatLabelFunction: PropTypes.func,\n  disableHistogram: PropTypes.bool,\n  padding: PropTypes.number,\n  sliderHeight: PropTypes.number,\n};\n\nHistoslider.defaultProps = {\n  selectedColor: \"#0074D9\",\n  unselectedColor: \"#DDDDDD\",\n  showOnDrag: false,\n  width: 400,\n  height: 200,\n  barBorderRadius: 2,\n  barPadding: 3,\n  padding: 20,\n  sliderHeight: 25,\n  handleLabelFormat: \"0.3P\",\n  formatLabelFunction: undefined,\n};\n\nexport default Histoslider;\n"]}